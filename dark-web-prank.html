<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Security Scan | OmniTools</title>
    <meta name="description" content="Advanced system integrity checker. Scan your device for potential vulnerabilities and leaks.">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Fira+Code:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- PREMIUM GOLD THEME (HACKER EDITION) --- */
        :root { 
            --bg-body: #000000;       
            --bg-card: #0c0c0e;       
            
            --primary: #f59e0b;       /* Gold/Amber */
            --danger: #ef4444;        /* Red */
            --success: #10b981;       /* Green */
            
            --text-main: #ededef;
            --text-muted: #a1a1aa;
            
            --font-main: 'Inter', sans-serif;
            --font-code: 'Fira Code', monospace;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }
        
        body { 
            font-family: var(--font-code); 
            background-color: var(--bg-body); 
            color: var(--success); 
            margin: 0; 
            overflow: hidden; 
            display: flex; flex-direction: column; 
            align-items: center; justify-content: center; 
            height: 100vh;
        }

        /* INTRO SCREEN */
        #intro { text-align: center; font-family: var(--font-main); }
        h1 { font-size: 2.5rem; font-weight: 800; margin-bottom: 10px; color: var(--text-main); }
        p { color: var(--text-muted); margin-bottom: 40px; }

        .scan-btn {
            padding: 15px 40px; font-size: 1.2rem; font-weight: 700;
            background: var(--primary); color: #000; border: none; 
            border-radius: 8px; cursor: pointer; transition: 0.2s;
            font-family: var(--font-main); letter-spacing: 1px;
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.3);
        }
        .scan-btn:hover { transform: scale(1.05); box-shadow: 0 0 40px rgba(245, 158, 11, 0.6); }

        /* TERMINAL */
        #terminal {
            width: 90%; max-width: 800px; height: 50vh;
            text-align: left; font-size: 14px; display: none;
            overflow-y: auto; margin-bottom: 20px;
            border-left: 2px solid var(--primary);
            padding-left: 20px;
        }
        #terminal::-webkit-scrollbar { display: none; } /* Hide Scrollbar */

        .log-entry { margin-bottom: 5px; opacity: 0.8; }
        .blink { animation: blink 1s infinite; }

        /* CAMERA FEED (THE TRAP) */
        #cam-container {
            width: 320px; height: 240px;
            border: 2px solid var(--danger);
            display: none; position: relative;
            background: #111; border-radius: 8px; overflow: hidden;
            box-shadow: 0 0 30px rgba(239, 68, 68, 0.3);
        }
        video { width: 100%; height: 100%; object-fit: cover; transform: scaleX(-1); }
        
        .rec-tag {
            position: absolute; top: 15px; left: 15px;
            color: var(--danger); font-weight: 700; font-family: var(--font-main);
            font-size: 0.8rem; display: flex; align-items: center; gap: 6px;
            animation: pulse 1s infinite;
        }

        /* RED SCREEN OF DEATH */
        #alert-overlay {
            position: fixed; inset: 0; background: rgba(50, 0, 0, 0.95);
            display: none; flex-direction: column; align-items: center; justify-content: center;
            z-index: 100; border: 10px solid var(--danger);
            text-align: center;
        }
        
        .shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both infinite; }

        @keyframes blink { 50% { opacity: 0; } }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
        @keyframes shake { 
            10%, 90% { transform: translate3d(-1px, 0, 0); } 
            20%, 80% { transform: translate3d(2px, 0, 0); } 
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 
            40%, 60% { transform: translate3d(4px, 0, 0); } 
        }
    </style>
</head>
<body>

    <div id="intro">
        <i class="fa-solid fa-shield-halved" style="font-size: 4rem; color: var(--primary); margin-bottom: 20px;"></i>
        <h1>System Security Scan</h1>
        <p>Check your device for data leaks and vulnerabilities.</p>
        <button class="scan-btn" onclick="initiateHack()">START SCAN</button>
        <br><br>
        <a href="index.html" style="color:var(--text-muted); text-decoration:none; font-family:var(--font-main); font-size:0.9rem;">Cancel</a>
    </div>

    <div id="terminal"></div>

    <div id="cam-container">
        <div class="rec-tag"><i class="fa-solid fa-circle"></i> REC</div>
        <video id="videoElement" autoplay playsinline></video>
    </div>

    <div id="alert-overlay">
        <i class="fa-solid fa-triangle-exclamation" style="font-size: 5rem; color: var(--danger); margin-bottom: 20px;"></i>
        <h1 style="color: var(--danger); font-size: 3rem; font-family: var(--font-main);">SYSTEM BREACHED</h1>
        <p id="location-text" style="color: white; font-size: 1.5rem; margin-bottom: 30px; font-family: var(--font-code);">LOCATING USER...</p>
        <h2 id="timer" style="color: white; font-family: var(--font-code);">WIPING DATA IN 10...</h2>
    </div>

    <script>
        const terminal = document.getElementById('terminal');
        const intro = document.getElementById('intro');
        const camBox = document.getElementById('cam-container');
        const alertBox = document.getElementById('alert-overlay');
        
        // --- AUDIO ENGINE ---
        function speak(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.pitch = 0.8; 
                utterance.rate = 0.9;  
                window.speechSynthesis.speak(utterance);
            }
        }

        function log(text, color = "#10b981") {
            const p = document.createElement('div');
            p.className = 'log-entry';
            p.innerHTML = `> ${text}`;
            p.style.color = color;
            terminal.appendChild(p);
            terminal.scrollTop = terminal.scrollHeight;
        }

        async function initiateHack() {
            // 1. Go Full Screen
            try {
                if (document.documentElement.requestFullscreen) {
                    await document.documentElement.requestFullscreen();
                }
            } catch(e) {} // Ignore if blocked

            intro.style.display = 'none';
            terminal.style.display = 'block';

            // 2. Fake Boot Sequence
            log("Initializing rootkit...", "#f59e0b");
            await delay(800);
            log("Loading exploit modules...", "#f59e0b");
            await delay(1200);
            log("Bypassing firewall...", "#f59e0b");
            await delay(1000);
            log("ACCESS GRANTED.", "#10b981");
            await delay(500);

            // 3. GET REAL IP & LOCATION (The Scary Part)
            try {
                log("Scanning network targets...", "#3b82f6");
                // Free IP API (Safe to use)
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();
                
                log(`TARGET ACQUIRED: ${data.ip}`, "#ef4444");
                speak("Target found.");
                await delay(1000);
                
                log(`GEOLOCATION: ${data.city}, ${data.region}, ${data.country_name}`, "#ef4444");
                log(`ISP: ${data.org}`, "#ef4444");
                speak(`Location identified. ${data.city}.`);
                
                document.getElementById('location-text').innerText = `USER DETECTED: ${data.city.toUpperCase()}`;
            } catch (e) {
                log("TARGET ACQUIRED: 192.168.1.X (Localhost)", "#ef4444");
            }

            await delay(2000);

            // 4. ACTIVATE CAMERA (The Visual Fear)
            log("Injecting payload into camera driver...", "#f59e0b");
            await delay(1000);
            log("ACCESSING WEBCAM...", "#ef4444");
            speak("Accessing camera feed.");
            
            camBox.style.display = "block";
            startCamera();

            await delay(4000);

            // 5. THE CLIMAX (Red Screen + Countdown)
            document.body.classList.add('shake'); 
            terminal.style.display = "none";
            alertBox.style.display = "flex"; // Show overlay
            
            speak("System compromised. Initiating data wipe.");
            
            let count = 10;
            const timer = setInterval(() => {
                count--;
                document.getElementById('timer').innerText = `WIPING STORAGE IN ${count}...`;
                if(count <= 0) {
                    clearInterval(timer);
                    endPrank();
                }
            }, 1000);
        }

        function startCamera() {
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia({ video: true })
                .then(function (stream) {
                    document.getElementById('videoElement').srcObject = stream;
                })
                .catch(function (err) {
                    log("Camera Access Denied (Simulating Override...)", "#ef4444");
                });
            }
        }

        function endPrank() {
            document.body.classList.remove('shake');
            camBox.style.display = "none";
            
            // Success / Prank Reveal
            alertBox.style.background = "#000";
            alertBox.style.border = "5px solid #10b981"; // Green border
            alertBox.innerHTML = `
                <i class="fa-regular fa-face-laugh-wink" style="font-size:5rem; color:#10b981; margin-bottom:20px;"></i>
                <h1 style="color:#10b981; font-family:'Inter', sans-serif;">PRANK SUCCESSFUL!</h1>
                <p style="color:#a1a1aa; font-family:'Inter', sans-serif; font-size:1.2rem; margin-top:20px;">
                    We did not delete anything. Your data is safe.<br>
                    But you should probably update your passwords.
                </p>
                <button onclick="location.reload()" style="
                    margin-top:30px; padding:15px 30px; background:#10b981; border:none; 
                    border-radius:8px; font-weight:700; cursor:pointer; font-size:1rem;">
                    Play Again
                </button>
                <br><br>
                <a href="index.html" style="color:#a1a1aa; text-decoration:none;">Back to Dashboard</a>
            `;
            
            // Stop camera stream
            const stream = document.getElementById('videoElement').srcObject;
            if(stream) {
                const tracks = stream.getTracks();
                tracks.forEach(track => track.stop());
            }
        }

        function delay(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    </script>
    <script src="database.js"></script>
</body>
</html>

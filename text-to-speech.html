<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Text to Speech - Play, Pause, & Resume</title>
    <meta name="description" content="Free Online TTS Reader. Features Play, Pause, Resume controls, Volume adjustment, and Language filtering. Listen to text naturally in your browser.">
    
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- AUDIO THEME --- */
        :root { 
            --bg: #0f172a; 
            --panel: #1e293b; 
            --text: #f8fafc; 
            --muted: #94a3b8; 
            --brand: #8b5cf6; /* Violet */
            --accent: #a78bfa;
            --border: 1px solid rgba(255, 255, 255, 0.1);
            --glow: 0 0 30px rgba(139, 92, 246, 0.2);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }
        body { font-family: 'Outfit', sans-serif; background: var(--bg); color: var(--text); padding-bottom: 80px; overflow-x: hidden; }

        .container { max-width: 900px; margin: 0 auto; padding: 20px; }
        
        /* HEADER */
        nav { display: flex; align-items: center; margin-bottom: 30px; padding-top: 20px; }
        .back-btn { color: var(--muted); text-decoration: none; font-weight: 600; display: flex; align-items: center; gap: 8px; transition: 0.2s; }
        .back-btn:hover { color: white; }

        .header-title { text-align: center; margin-bottom: 40px; }
        h1 { font-size: 2.5rem; font-weight: 800; margin-bottom: 10px; background: linear-gradient(to right, #8b5cf6, #c4b5fd); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .subtitle { color: var(--muted); font-size: 1.1rem; }

        /* TTS INTERFACE */
        .tts-card { 
            background: var(--panel); border: var(--border); border-radius: 20px; padding: 30px; 
            box-shadow: var(--glow); margin-bottom: 40px;
        }

        /* FILTER ROW */
        .filter-row { display: flex; gap: 15px; margin-bottom: 20px; align-items: center; }
        .lang-filter { flex: 1; }
        .voice-select { flex: 2; }

        .controls-grid { 
            display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 20px; 
            background: rgba(0,0,0,0.2); padding: 15px; border-radius: 12px; border: 1px solid #334155;
        }
        
        label { display: block; font-size: 0.75rem; color: var(--muted); font-weight: 700; margin-bottom: 5px; text-transform: uppercase; }

        select, input[type="range"] { 
            width: 100%; padding: 10px; background: #020617; border: 1px solid #334155; 
            color: white; border-radius: 8px; font-size: 0.9rem; font-family: 'Outfit', sans-serif; cursor: pointer;
        }
        select:focus { border-color: var(--brand); }

        /* TEXT AREA */
        .text-wrapper { position: relative; margin-bottom: 25px; }
        textarea {
            width: 100%; height: 250px; background: #020617; border: 1px solid #334155; 
            color: white; padding: 20px; border-radius: 12px; font-size: 1.1rem; line-height: 1.6;
            resize: vertical; font-family: 'Outfit', sans-serif;
        }
        textarea:focus { border-color: var(--brand); box-shadow: 0 0 15px rgba(139, 92, 246, 0.15); }

        .status-bar { 
            display: flex; justify-content: space-between; font-size: 0.85rem; color: var(--muted); margin-top: 5px; 
        }

        /* PLAYBACK BUTTONS */
        .btn-row { display: flex; justify-content: center; gap: 20px; margin-top: 20px; }
        
        .round-btn {
            width: 65px; height: 65px; border-radius: 50%; border: none; font-size: 1.6rem;
            display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.2s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3); position: relative;
        }
        
        .btn-play { background: var(--brand); color: white; }
        .btn-play:hover { transform: scale(1.1); box-shadow: 0 0 25px rgba(139, 92, 246, 0.6); }
        
        .btn-pause { background: #eab308; color: #020617; display: none; } /* Hidden by default */
        .btn-pause:hover { transform: scale(1.1); box-shadow: 0 0 20px rgba(234, 179, 8, 0.5); }

        .btn-stop { background: #334155; color: #f43f5e; width: 50px; height: 50px; font-size: 1.2rem; }
        .btn-stop:hover { background: #475569; }

        .btn-clear { background: transparent; border: 1px solid #334155; color: var(--muted); width: 50px; height: 50px; font-size: 1rem; }
        .btn-clear:hover { border-color: white; color: white; }

        /* EQUALIZER */
        .equalizer { 
            height: 30px; display: flex; align-items: center; justify-content: center; gap: 4px; 
            margin-bottom: 20px; opacity: 0.3; transition: 0.3s;
        }
        .bar { width: 5px; background: var(--brand); border-radius: 3px; height: 5px; transition: 0.2s; }
        
        .equalizer.active { opacity: 1; }
        .equalizer.active .bar { animation: bounce 0.8s infinite ease-in-out; }

        @keyframes bounce { 0%, 100% { height: 5px; } 50% { height: 30px; } }
        .bar:nth-child(1) { animation-delay: 0.1s; }
        .bar:nth-child(2) { animation-delay: 0.2s; }
        .bar:nth-child(3) { animation-delay: 0.3s; }
        .bar:nth-child(4) { animation-delay: 0.4s; }
        .bar:nth-child(5) { animation-delay: 0.5s; }

        /* SEO SECTION */
        .seo-section { max-width: 800px; margin: 60px auto 0; color: #cbd5e1; line-height: 1.8; border-top: var(--border); padding-top: 50px; }
        .seo-section h2 { color: white; font-size: 1.8rem; margin-bottom: 20px; }
        .seo-section h3 { color: white; font-size: 1.4rem; margin-top: 30px; margin-bottom: 15px; }

        @media(max-width: 700px) { .filter-row, .controls-grid { flex-direction: column; display: flex; } }
    </style>
</head>
<body>

<div class="container">
    <nav>
        <a href="index.html" class="back-btn"><i class="fa-solid fa-arrow-left"></i> Back to Dashboard</a>
    </nav>

    <div class="header-title">
        <h1>Text to Speech Reader</h1>
        <p class="subtitle">Listen to any text. Pause, resume, and adjust speed.</p>
    </div>

    <div class="tts-card">
        
        <div class="filter-row">
            <div class="lang-filter">
                <label>Filter Language</label>
                <select id="langFilter" onchange="filterVoices()">
                    <option value="all">All Languages</option>
                    <option value="en" selected>English Only</option>
                    <option value="es">Spanish (Español)</option>
                    <option value="fr">French (Français)</option>
                    <option value="de">German (Deutsch)</option>
                </select>
            </div>
            <div class="voice-select">
                <label>Select Voice</label>
                <select id="voiceSelect"><option>Loading...</option></select>
            </div>
        </div>

        <div class="controls-grid">
            <div>
                <label>Speed (Rate)</label>
                <input type="range" id="rate" min="0.5" max="2" step="0.1" value="1" oninput="updateLabel('rateVal', this.value + 'x')">
                <div style="font-size:0.7rem; color:var(--brand); text-align:right;" id="rateVal">1x</div>
            </div>
            <div>
                <label>Pitch</label>
                <input type="range" id="pitch" min="0.5" max="2" step="0.1" value="1" oninput="updateLabel('pitchVal', this.value)">
                <div style="font-size:0.7rem; color:var(--brand); text-align:right;" id="pitchVal">1</div>
            </div>
            <div>
                <label>Volume</label>
                <input type="range" id="volume" min="0" max="1" step="0.1" value="1" oninput="updateLabel('volVal', Math.round(this.value * 100) + '%')">
                <div style="font-size:0.7rem; color:var(--brand); text-align:right;" id="volVal">100%</div>
            </div>
        </div>

        <div class="text-wrapper">
            <textarea id="text" placeholder="Paste your text here..." oninput="updateStatus()"></textarea>
            <div class="status-bar">
                <span id="statusText">Ready</span>
                <span id="charCount">0 Chars</span>
            </div>
        </div>
        
        <div class="equalizer" id="eq">
            <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
        </div>

        <div class="btn-row">
            <button class="round-btn btn-clear" onclick="clearText()" title="Clear Text"><i class="fa-solid fa-eraser"></i></button>
            
            <button class="round-btn btn-play" id="playBtn" onclick="togglePlay()">
                <i class="fa-solid fa-play"></i>
            </button>
            
            <button class="round-btn btn-stop" onclick="stop()" title="Stop"><i class="fa-solid fa-stop"></i></button>
        </div>

    </div>

    <div class="seo-section">
        <h2>Advanced Text-to-Speech Controls</h2>
        <p>
            Unlike basic TTS readers, our tool gives you full control over the audio output. Whether you are proofreading a long document or listening to an ebook, the ability to <strong>Pause and Resume</strong> is essential.
        </p>

        <h3>Features Explained</h3>
        <ul>
            <li><strong>Pause & Resume:</strong> Need to take a break? Hit pause. The reader remembers exactly where you left off, so you don't have to restart from the beginning.</li>
            <li><strong>Language Filter:</strong> Modern browsers have 50+ voices installed. Use the "English Only" filter to hide foreign language voices and find the best one quickly.</li>
            <li><strong>Volume Slider:</strong> Adjust the playback volume independently of your system volume. Perfect if you are listening to music in the background.</li>
        </ul>

        <h3>Best Practices for Listeners</h3>
        <p>
            For speed reading or skimming, try setting the <strong>Speed</strong> to <strong>1.5x</strong>. Research shows that humans can comprehend speech much faster than most people talk. This helps you consume articles and emails in half the time.
        </p>
    </div>

</div>

<script>
    const synth = window.speechSynthesis;
    const textInput = document.getElementById('text');
    const voiceSelect = document.getElementById('voiceSelect');
    const langFilter = document.getElementById('langFilter');
    const playBtn = document.getElementById('playBtn');
    const eq = document.getElementById('eq');
    const statusText = document.getElementById('statusText');

    let voices = [];
    let isPaused = false;

    // 1. Load & Filter Voices
    function loadVoices() {
        voices = synth.getVoices();
        filterVoices();
    }

    function filterVoices() {
        const filter = langFilter.value;
        voiceSelect.innerHTML = '';
        
        // Filter array
        const filtered = voices.filter(v => filter === 'all' || v.lang.startsWith(filter));

        filtered.forEach(voice => {
            const option = document.createElement('option');
            option.textContent = `${voice.name} (${voice.lang})`;
            option.setAttribute('data-name', voice.name);
            voiceSelect.appendChild(option);
        });

        if(filtered.length === 0) {
            const option = document.createElement('option');
            option.textContent = "No voices found for this language";
            voiceSelect.appendChild(option);
        }
    }

    if (speechSynthesis.onvoiceschanged !== undefined) {
        speechSynthesis.onvoiceschanged = loadVoices;
    }
    // Initial try
    setTimeout(loadVoices, 100);

    // 2. Play / Pause Logic
    function togglePlay() {
        if(synth.speaking && !isPaused) {
            // PAUSE
            synth.pause();
            isPaused = true;
            playBtn.innerHTML = '<i class="fa-solid fa-play"></i>';
            playBtn.style.background = '#eab308'; // Yellow for paused state
            eq.classList.remove('active');
            statusText.innerText = "Paused";
        } 
        else if(synth.paused) {
            // RESUME
            synth.resume();
            isPaused = false;
            playBtn.innerHTML = '<i class="fa-solid fa-pause"></i>';
            playBtn.style.background = 'var(--brand)';
            eq.classList.add('active');
            statusText.innerText = "Speaking...";
        } 
        else {
            // START NEW
            speak();
        }
    }

    function speak() {
        if (textInput.value === '') return;
        
        // Stop any current
        synth.cancel();
        isPaused = false;

        const utterance = new SpeechSynthesisUtterance(textInput.value);

        // Voice
        const selectedName = voiceSelect.selectedOptions[0]?.getAttribute('data-name');
        const voice = voices.find(v => v.name === selectedName);
        if(voice) utterance.voice = voice;

        // Settings
        utterance.rate = document.getElementById('rate').value;
        utterance.pitch = document.getElementById('pitch').value;
        utterance.volume = document.getElementById('volume').value;

        // Events
        utterance.onstart = () => {
            playBtn.innerHTML = '<i class="fa-solid fa-pause"></i>';
            playBtn.style.background = 'var(--brand)'; // Purple
            eq.classList.add('active');
            statusText.innerText = "Speaking...";
        };

        utterance.onend = () => {
            resetUI();
            statusText.innerText = "Finished";
        };

        utterance.onerror = () => {
            resetUI();
            statusText.innerText = "Error";
        };

        synth.speak(utterance);
    }

    function stop() {
        synth.cancel();
        resetUI();
        statusText.innerText = "Stopped";
    }

    function resetUI() {
        isPaused = false;
        playBtn.innerHTML = '<i class="fa-solid fa-play"></i>';
        playBtn.style.background = 'var(--brand)';
        eq.classList.remove('active');
    }

    // 3. UI Helpers
    function updateLabel(id, val) {
        document.getElementById(id).innerText = val;
    }

    function updateStatus() {
        document.getElementById('charCount').innerText = textInput.value.length + " Chars";
        localStorage.setItem('tts_text', textInput.value);
    }

    function clearText() {
        textInput.value = '';
        updateStatus();
        stop();
    }

    // Load saved text
    window.onload = () => {
        const saved = localStorage.getItem('tts_text');
        if(saved) {
            textInput.value = saved;
            updateStatus();
        }
    }
</script>

</body>
</html>
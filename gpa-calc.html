<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro GPA Forecaster - OmniTools</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --bg: #0f172a; --panel: #1e293b; --text: #f8fafc; --muted: #94a3b8; --primary: #8b5cf6; --border: #334155; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: var(--text); padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        
        /* CARD STYLES */
        .card { background: var(--panel); padding: 30px; border-radius: 20px; border: 1px solid var(--border); margin-bottom: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        
        /* CLASS ROW */
        .class-row { display: grid; grid-template-columns: 3fr 1fr 1fr 40px; gap: 15px; margin-bottom: 15px; animation: fadeIn 0.3s ease; }
        input, select { background: #020617; border: 1px solid var(--border); color: white; padding: 14px; border-radius: 10px; font-weight: 500; width: 100%; }
        input:focus, select:focus { border-color: var(--primary); outline: none; }
        
        /* BUTTONS */
        .btn { padding: 12px 25px; border-radius: 10px; font-weight: 800; border: none; cursor: pointer; transition: 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .btn-add { background: #334155; color: white; width: 100%; }
        .btn-calc { background: var(--primary); color: white; font-size: 1.1rem; padding: 16px; width: 100%; }
        .btn:hover { transform: translateY(-2px); }

        /* RESULTS */
        .result-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px; }
        .res-box { background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.3); padding: 20px; border-radius: 15px; text-align: center; }
        .res-val { font-size: 2.5rem; font-weight: 800; color: #a78bfa; }
        .res-label { text-transform: uppercase; font-size: 0.8rem; letter-spacing: 1px; color: var(--muted); }

        /* FORECASTER SECTION */
        .forecast-box { background: linear-gradient(135deg, #1e293b, #0f172a); border: 1px solid #f59e0b; padding: 25px; border-radius: 15px; margin-top: 30px; }
        .forecast-title { color: #fcd34d; font-weight: 700; margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }

        @keyframes fadeIn { from{opacity:0; transform:translateY(5px)} to{opacity:1; transform:translateY(0)} }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" style="color:var(--muted); text-decoration:none; margin-bottom:20px; display:inline-block;"><i class="fa-solid fa-arrow-left"></i> Back</a>
        
        <div class="card">
            <h1 style="margin-bottom:20px;"><i class="fa-solid fa-graduation-cap" style="color:var(--primary)"></i> GPA Calculator</h1>
            
            <div class="class-row" style="margin-bottom:5px;">
                <label style="font-size:0.8rem; color:var(--muted)">Class Name</label>
                <label style="font-size:0.8rem; color:var(--muted)">Grade</label>
                <label style="font-size:0.8rem; color:var(--muted)">Credits</label>
                <div></div>
            </div>

            <div id="rows-container"></div>
            
            <button class="btn btn-add" onclick="addRow()"><i class="fa-solid fa-plus"></i> Add Class</button>
            <div style="margin-top:20px; border-top:1px solid var(--border); padding-top:20px;">
                <button class="btn btn-calc" onclick="calculate()"><i class="fa-solid fa-calculator"></i> Calculate GPA</button>
            </div>

            <div class="result-grid">
                <div class="res-box">
                    <div class="res-val" id="gpa-display">0.00</div>
                    <div class="res-label">Semester GPA</div>
                </div>
                <div class="res-box" style="background:rgba(34,197,94,0.1); border-color:rgba(34,197,94,0.3);">
                    <div class="res-val" id="total-creds" style="color:#4ade80;">0</div>
                    <div class="res-label">Total Credits</div>
                </div>
            </div>
        </div>

        <div class="forecast-box">
            <div class="forecast-title"><i class="fa-solid fa-crystal-ball"></i> GPA Forecaster</div>
            <p style="font-size:0.9rem; color:var(--muted); margin-bottom:15px;">
                "I have a cumulative GPA of <input type="number" id="curr-gpa" style="width:70px; padding:5px; display:inline-block;" placeholder="3.5"> 
                with <input type="number" id="curr-creds" style="width:60px; padding:5px; display:inline-block;" placeholder="60"> credits taken."
            </p>
            <p style="font-size:0.9rem; color:white;">
                Combined with this semester, my New Cumulative GPA will be: <span id="new-gpa" style="font-weight:800; font-size:1.2rem; color:#fcd34d;">---</span>
            </p>
            <button class="btn" onclick="forecast()" style="background:#f59e0b; color:black; margin-top:10px;">Update Forecast</button>
        </div>
    </div>

<script>
    const points = { 'A':4.0, 'A-':3.7, 'B+':3.3, 'B':3.0, 'B-':2.7, 'C+':2.3, 'C':2.0, 'C-':1.7, 'D':1.0, 'F':0 };
    let semGPA = 0;
    let semCreds = 0;

    function addRow() {
        const div = document.createElement('div');
        div.className = 'class-row';
        div.innerHTML = `
            <input type="text" placeholder="Course Name (e.g. Math 101)">
            <select class="grade-select">
                <option value="4.0">A (4.0)</option><option value="3.7">A- (3.7)</option>
                <option value="3.3">B+ (3.3)</option><option value="3.0">B (3.0)</option>
                <option value="2.7">B- (2.7)</option><option value="2.3">C+ (2.3)</option>
                <option value="2.0">C (2.0)</option><option value="1.7">C- (1.7)</option>
                <option value="1.0">D (1.0)</option><option value="0">F (0.0)</option>
            </select>
            <input type="number" class="cred-input" value="3" min="0">
            <button style="background:transparent; border:none; color:#ef4444; cursor:pointer;" onclick="this.parentElement.remove()"><i class="fa-solid fa-trash"></i></button>
        `;
        document.getElementById('rows-container').appendChild(div);
    }

    function calculate() {
        let totalPts = 0;
        let totalC = 0;
        
        document.querySelectorAll('.class-row').forEach(row => {
            const grade = parseFloat(row.querySelector('.grade-select').value);
            const cred = parseFloat(row.querySelector('.cred-input').value);
            
            if(!isNaN(cred) && cred > 0) {
                totalPts += (grade * cred);
                totalC += cred;
            }
        });

        if(totalC === 0) return;

        semGPA = totalPts / totalC;
        semCreds = totalC;

        document.getElementById('gpa-display').innerText = semGPA.toFixed(2);
        document.getElementById('total-creds').innerText = semCreds;
        
        // Auto-run forecast if data exists
        if(document.getElementById('curr-gpa').value) forecast();
    }

    function forecast() {
        const oldGPA = parseFloat(document.getElementById('curr-gpa').value);
        const oldCreds = parseFloat(document.getElementById('curr-creds').value);

        if(isNaN(oldGPA) || isNaN(oldCreds) || semCreds === 0) {
            document.getElementById('new-gpa').innerText = "---";
            return;
        }

        const totalPoints = (oldGPA * oldCreds) + (semGPA * semCreds);
        const totalCredits = oldCreds + semCreds;
        const newGPA = totalPoints / totalCredits;

        document.getElementById('new-gpa').innerText = newGPA.toFixed(2);
    }

    // Init with 4 rows
    for(let i=0; i<4; i++) addRow();
</script>
</body>
</html>